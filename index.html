<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body onload="timer1 = setTimeout(colorizeElement,1000,p1)">
    <p id="p1" style="width: 200px; font-size: 40px">Цвет</p>

    <input
      type="button"
      value="Остановить"
      onclick="changeColorState(this,p1)"
    />

    <script>
      n = 5;
      colors = [];
      const hexsymbols = [
        "0",
        "1",
        "2",
        "3",
        "4",
        "5",
        "6",
        "7",
        "8",
        "9",
        "a",
        "b",
        "c",
        "d",
        "e",
        "f",
      ];

      function getRandomDigits(len = 6) {
        s = "";
        for (let i = 0; i <= n; i++) {
          num = Math.floor(Math.random() * 16);
          s += hexsymbols[num];
        }

        return "#" + s;
      }

      function changeColorState(button, elem) {
        if (button.value == "Покрасить") {
          timer1 = setTimeout(colorizeElement, 1000, elem);
          button.value = "Остановить";
        } else {
          button.value = "Покрасить";
          stop();
        }
      }
      function colorizeElement(elem) {
        col = getRandomDigits();
        elem.style.backgroundColor = col;
        elem.innerHTML = col;
        console.log(elem.id);
        timer1 = setTimeout(colorizeElement, 1000, elem);
        console.log("colorizeElement " + timer1);
      }
      function stop() {
        console.log("stop " + timer1);
        clearTimeout(timer1);
      }
    </script>
  </body>
</html>
